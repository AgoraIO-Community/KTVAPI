# 虚拟声卡集成说明

#### 1、创建 AudioSettings 模块

* 创建 RtcEngine 实例

~~~
val mRtcEngine = RtcEngine.create()
~~~

* 创建 AudioSettings 实例

~~~
// 将mRtcEngine传给AudioSettigs
val audioSettings = AudioSettigs(mRtcEngine)
~~~



#### 2、调用 API: enableVirtualSoundCard 控制虚拟声卡的开关和选择

~~~
fun enableVirtualSoundCard(sceneType: SceneType, soundCardType: SoundCardType, earPhoneType: EarPhoneType?)
~~~

* sceneType: 场景类型, 分为 K 歌房和语聊房, 在不同场景下需要使用对应的 type
* soundCardType: 虚拟声卡类型, close 为关闭
* earPhoneType: 插入耳机的类型, null 为默认

##### 例子

* 关闭虚拟声卡

~~~
audioSettings.enableVirtualSoundCard(SceneType.KTV, SoundCardType.Close, null)
~~~

* 在语聊场景下开**男生磁性**音效

~~~
audioSettings.enableVirtualSoundCard(SceneType.Chat, SoundCardType.NanShengCiXing, null)
~~~

* 在 k 歌场景下开**女生唱歌**音效, 且耳机选择**针对华为系列有线耳机**

~~~
audioSettings.enableVirtualSoundCard(SceneType.KTV, SoundCardType.NvShengChangGe, EarPhoneType.EQ3)
~~~



#### 3、获取当前虚拟声卡开关状态

enabled 为静态成员变量

~~~
val enabled = AudioSettings.enabled
~~~



#### 4、重置虚拟声卡状态

在RtcEngine释放前需要手动关闭虚拟声卡, 避免状态错误

* 关闭虚拟声卡

~~~
audioSettings.enableVirtualSoundCard(SceneType.KTV, SoundCardType.Close, null)
~~~

* 释放 RtcEngine

~~~
RtcEngine.destroy()
~~~

